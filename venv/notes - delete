# # Function to print table
# def print_table(fields, data):
#     print ("|", fields[0],"|", fields[1],"   |", fields[2],"     |",fields[3],"|", fields[4],"  |", fields[5],"|", fields[6],"|", fields[7],"|")
#     print("-------------------------------------------------------------------------------------------------------------------")
#     for item in data:
#         print ("|", item[0],(" ")*6,"|",
#                 item[1],(" ")*(14-len(item[1])),"|",
#                 item[2],(" ")*(10-len(item[2])),"|",
#                 item[3],"|",
#                 item[4],"|",
#                 item[5],(" ")*9,"|",
#                 item[6],(" ")*(6-len(item[6])),"|",
#                 item[7],(" ")*9,"|")
    

# delete_record(fields,data)



# #function to amend record
# def amend_record(fields,data):
#     # Using project id to find index of project to amend
#     try:
#         id_to_amend = int(input("\nEnter the Project ID of the project you want to amend:    "))
#     except ValueError:
#         print("\nError: Project ID must be a number")
#     else:
#         record_index = -1
#         for i, record in enumerate(data):
#             if record[0] == id_to_amend:
#                 record_index = i
#                 break
                



#     record_doesnt_exist= True
    
#         # Making sure project id exists
#     if record_index == -1:
#         print("Record not found.")
#     else:
#         print(f"Amending Project {id_to_amend}...")

# #     # for i, record in enumerate(data):
# #     #     if record[0] == id_to_amend:
# #     #         record_index = i
# #     #         break
# # #Making sure project id exixts
# #     while record_doesnt_exist == True:
# #         if record_index == -1:
# #             print("Record not found.")
# #             record_doesnt_exist == True
# #         else:
# #             record_doesnt_exist = False
#     field_to_amend = input("Which field would you like to amend?    ").upper()
#     if field_to_amend not in fields:
#         print(f"Field {field_to_amend} does not exist")
#     else:
#         #Checking Project ID is an integer and is not duplicated.
#         if field_to_amend == "PROJECT ID":
#             try:
#                 new_projectid = int(input(f"Enter the new record for {field_to_amend}:   "))
#                 duplicate = any(new_projectid == row[0] for row in data)

#                 if duplicate:
#                     print("\nProject ID already taken")
#                 else:
#                     field_index = fields.index(field_to_amend)
#                     data[record_index][field_index] = new_projectid
#                     print("\nRecord amended successfuly...")
#                     # break 
#             except ValueError:
#                 print("\nError: Project ID must be a number") 
#         #Checking start date is in datetime format.
#         if field_to_amend == "START DATE":
#             try:
#                 new_startdate=  input(f"Enter the new record for {field_to_amend}:   ")
#                 datetime.datetime.strptime(new_startdate,"%Y-%m-%d")
#                 field_index = fields.index(field_to_amend)
#                 data[record_index][field_index] = new_startdate
#                 print("\nRecord amended successfuly...")
#             except ValueError:
#                 print("\nError: Start Date should be in the format YYYY-MM-DD.")
            
#         new_startdate = data[record_index][fields.index("START DATE")]

        
#         #Checking enddate is in datetime format and is after start date.
#         if field_to_amend == "END DATE":
#             try:
#                 new_enddate=  input(f"Enter the new record for {field_to_amend}:   ")
#                 if new_enddate<new_startdate: 
#                     print(f"\nEnd date cannot be before {new_startdate}")
#                 else:
#                     datetime.datetime.strptime(new_enddate,"%Y-%m-%d")
#                     field_index = fields.index(field_to_amend)
#                     data[record_index][field_index] = new_enddate
#                     print("\nRecord amended successfuly...")
#             except ValueError:
#                 print("\nError: End Date should be in the format YYYY-MM-DD.")
            

        
#         #Checking input is in string format
#         if field_to_amend == "PROJECT NAME" or field_to_amend == "COUNTRY" or field_to_amend == "CLIENT":
#             try:
#                 new_string= str(input(f"Enter the new record for {field_to_amend}:   ")).upper()
#                 field_index = fields.index(field_to_amend)
#                 data[record_index][field_index] = new_string
#                 print("\nRecord amended successfuly...")
#             except TypeError:
#                 print(f"\nError: {field_to_amend} must be a string") 
  
#         #Checking input is in integer format
#         if field_to_amend == "CONSULTANT ID" or field_to_amend == "STATUS":
#             try:
#                 new_integer= int(input(f"Enter the new record for {field_to_amend}:   "))
#                 field_index = fields.index(field_to_amend)
#                 data[record_index][field_index] = new_integer
#                 print("\nRecord amended successfuly...")
#             except TypeError:
#                 print(f"\nError: {field_to_amend} must be a number") 

        

#         # #Amending record
#         # field_index = fields.index(field_to_amend)
#         # data[record_index][field_index] = amended_record_value
#         # print("\nRecord amended successfuly...")
        
#         print_table(fields,data)
#         return(fields,data)



import pytest
#   main import menu
from table import print_table, add_record, amend_record, delete_record, display_full_details
# from pytest import monkeypatch


def test_menu():
    pass
#     # ARRANGE
#     menu()

#     #ACT
#     output = menu()

#     #ASSERT
#     assert output == "\n------------- Main Menu -------------" 
#     "1. Add Record" 
#     "2. Amend Record" 
#     "3. Delete Record"
#     "4. Display Full Details"
    

# def mock_input(prompt):
#     responses = {"\nWhat is the Project ID of the record you would like to add:   ": 100,
#                  "\nWhat is the Project name of the record you would like to add:   ": "Test",
#                  "\nWho is the Client of the record you would like to add:   ": "Test",
#                  "\nWhat is the Start Date of the record you would like to add:   ": 2011-11-11,
#                  "\nWhat is the End Date of the record you would like to add:   ": 2012-12-12,
#                  "\nWhat is the Consultant ID of the record you would like to add:   ": 100,
#                  "\nWhat is the Country of the record you would like to add:   ": "Test",
#                  "\nWhat is the Project Status of the record you would like to add (/3):   ": 0}
#     return responses(prompt)

# def test_add_record_success(monkeypatch):
#     #ARRANGE
#     new_record = []
#     monkeypatch.setattr('builins.input', mock_input)

#     #ACT
#     output = add_record()

#     #ASSERT
#     assert output == "The new record has been added succesfully."


def test_add_record(monkeypatch, capsys):
    # Mock user input
    mock_inputs = [
        "100",               # Project ID
        "Test",              # Project Name
        "Test Client",       # Client
        "2022-03-15",        # Start Date
        "2022-03-20",        # End Date
        "123",               # Consultant ID
        "Test Country",      # Country
        "1"                  # Status
    ]

    def mock_input(prompt):
        return mock_inputs.pop(0)

    monkeypatch.setattr("builtins.input", mock_input)

    # Call the function
    new_record = add_record()

    # Capture and assert the output
    captured = capsys.readouterr()
    assert "The new record has been added successfully." in captured.out

    # Assert the new record data
    assert new_record == {
        'Project ID': 100,
        'Project Name': 'Test',
        'Client': 'Test Client',
        'Start Date': '2022-03-15',
        'End Date': '2022-03-20',
        'Consultant ID': 123,
        'Country': 'Test Country',
        'Status': 1


# def test_add_record(monkeypatch, capsys):
#     # Mock user input
#     mock_inputs = [
#         "100",               # Project ID
#         "Test",              # Project Name
#         "Test Client",       # Client
#         "2022-03-15",        # Start Date
#         "2022-03-20",        # End Date
#         "123",               # Consultant ID
#         "Test Country",      # Country
#         "1"                  # Status
#     ]

#     def mock_input(prompt):
#         return mock_inputs.pop(0)

#     monkeypatch.setattr("builtins.input", mock_input)

#     # Call the function
#     new_record = add_record()

#     # Capture and assert the output
#     captured = capsys.readouterr()
#     assert "The new record has been added successfully." in captured.out

#     # Assert the new record data
#     assert new_record == {
#         'Project ID': 100,
#         'Project Name': 'Test',
#         'Client': 'Test Client',
#         'Start Date': '2022-03-15',
#         'End Date': '2022-03-20',
#         'Consultant ID': 123,
#         'Country': 'Test Country',
#         'Status': 1


#   main import menu
# from table import print_table, add_record, amend_record, delete_record, display_full_details, fields, data
# from pytest import monkeypatch


 # Function to print table
# def print_table(fields, data):
#     table = tabulate(data, fields, tablefmt = "pretty")
#     print(table)
